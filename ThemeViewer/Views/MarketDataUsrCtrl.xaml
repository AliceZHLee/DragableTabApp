<UserControl x:Class="ThemeViewer.Views.MarketDataUsrCtrl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ThemeViewer.Models"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <Style x:Key="CustomerItemStyle" TargetType="{x:Type DataGridRow}">
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        </Style>
        <Style TargetType="{x:Type ListBox}" x:Key="FilterListbox_Style">
            <Setter Property="Height" Value="180"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <CheckBox IsChecked="{Binding IsChecked}" Content="{Binding Label}" VerticalAlignment="Stretch" Checked="CheckBox_Update" Unchecked="CheckBox_Update"/>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <local:TimeFltOptions x:Key="TimePointOptions"/>
        <local:TextFltOptions x:Key="ComboBoxOptions"/>      
    </UserControl.Resources>

    <Grid Margin="5">
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Border BorderBrush="Black" Background="White" Grid.Row="0">
            <Grid Margin="0,5,0,5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0" Grid.ColumnSpan="2" Orientation="Horizontal" x:Name="current_selected_FilterDic" CanHorizontallyScroll="True" VerticalAlignment="Center">
                    <TextBlock Grid.Column="0" Text="&#xf0b0;" FontSize="16" FontFamily="{StaticResource FontAwesome}" Margin="5"  HorizontalAlignment="Left" />
                    <WrapPanel Grid.Column="1" Orientation="Horizontal" FlowDirection="LeftToRight"  VerticalAlignment="Center">
                        <TextBlock Name="Default_Filter_Label" Text="No filters applied. Click on a column header to set one" VerticalAlignment="center"/>
                        <ItemsControl ItemsSource="{Binding Path=FilterLabel}" HorizontalAlignment="Stretch" Name="added_FilterDic_Label" Visibility="Hidden">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Margin="4">
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" >
                                            <TextBlock Background="DarkBlue" FontWeight="Bold" Foreground="white" FontSize="14" Text="{Binding Path=Label}" Padding="2" VerticalAlignment="Center" Margin="0,0,3,0" />
                                            <TextBlock Background="White" Foreground="Black" Text="{Binding Path=SelectedFilterDic}" VerticalAlignment="Center" Margin="2,0,1,0" />
                                            <Button Click="CloseFltLabel_Click" Tag="{Binding Path=Label}" Style="{StaticResource labelBtnTemplate}" Grid.Column="1" Margin="4" Width="12" DockPanel.Dock="Right" HorizontalAlignment="Right"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </WrapPanel>
                </StackPanel>
                <Button Grid.Column="2" IsEnabled="True" Margin="5" HorizontalAlignment="Right" Background="Transparent" Padding="2" BorderBrush="Transparent" Click="ExportToExcel">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="5"/>
                        </Style>
                    </Button.Resources>
                    <Button.Content>
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Orientation="Horizontal" Background="Transparent" Height="25">
                            <TextBlock x:Name="download_btn" Text="&#xf019;" FontFamily="{StaticResource FontAwesome}" VerticalAlignment="Center" Background="Transparent"/>
                            <TextBlock Text="Download" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="2 1" Padding="5" FontWeight="Bold"/>
                        </StackPanel>
                    </Button.Content>
                </Button>
                <Button Name="CustomizeBtn" Grid.Column="3" Margin="5" HorizontalAlignment="Right" Background="Transparent" Padding="2" BorderBrush="Transparent" Click="CustomizeColumn_Click">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="5"/>
                        </Style>
                    </Button.Resources>
                    <Button.Content>
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Orientation="Horizontal" Background="Transparent" Height="25">
                            <TextBlock x:Name="Customize_btn" Text="&#xf013;" FontFamily="{StaticResource FontAwesome}" VerticalAlignment="Center" Background="Transparent"/>
                            <TextBlock Text="Customize" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="2 1" Padding="5" FontWeight="Bold"/>
                        </StackPanel>
                    </Button.Content>
                </Button>
                <Popup Name="pop_CustomizeColumn" Closed="CustomizePopUpClose" PlacementTarget="{Binding ElementName=CustomizeBtn}" Style="{Binding Source={StaticResource PopUpStyle}}">
                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <StackPanel Orientation="Vertical" Grid.Row="0" Grid.RowSpan="2">
                                <CheckBox Name="checkbox_selectAll_CustomizeColumns" Grid.Row="0" Margin="10,10,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllCheckBox_Checked" Unchecked="SelectAllCheckBox_Checked" Content="(Select All)" />
                                <ListBox Name="lstColumnOptions" Grid.Row="1" Margin="10" ItemsSource="{Binding MarketColumns}" Style="{StaticResource FilterListbox_Style}" Height="350"/>
                            </StackPanel>
                            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}" />
                                <Button Padding="5" Margin="10" Background="#1589B6" Foreground="White" Content="UPDATE" Click="UpdateColumn_Click" Style="{StaticResource popUpBtn}" />
                            </StackPanel>
                        </Grid>
                    </Border>
                </Popup>

                <Button Grid.Column="4"  Margin="5" HorizontalAlignment="Right" Background="Transparent" Padding="2" BorderBrush="Transparent" Click="Reset_CurrFlts">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="5"/>
                        </Style>
                    </Button.Resources>
                    <Button.Content>
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Orientation="Horizontal" Background="Transparent" Height="25">
                            <TextBlock x:Name="resetFlt_btn" Text="&#xf2f9;" FontFamily="{StaticResource FontAwesome}" VerticalAlignment="Center" Background="Transparent"/>
                            <TextBlock Text="Reset Filters" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="2 1" Padding="5" FontWeight="Bold"/>
                        </StackPanel>
                    </Button.Content>
                </Button>
            </Grid>
        </Border>
        <DockPanel Grid.Row="1">
            <DataGrid x:Name="dataGrid" DataContext="{Binding MarketDataViewS}" ItemsSource="{Binding}" AutoGenerateColumns="False" IsReadOnly="True"                       
                       HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" 
                       LostFocus="LostFocus_datagrid" SelectionMode="Extended">
                <DataGrid.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#3d8cf8"/>
                </DataGrid.Resources>
                <DataGrid.Background>
                    <ImageBrush ImageSource="\Resources\ClearedDeal.png" Opacity="0.2" Stretch="None"/>
                </DataGrid.Background>
                <DataGrid.RowStyle>
                    <Style TargetType="{x:Type DataGridRow}">
                        <Setter Property="Background" Value="White"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsProductRelated}" Value="true">
                                <Setter Property="Background" Value="#b2eb9c"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding IsProductRelated}" Value="false">
                                <Setter Property="Background" Value="Transparent"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>

                <DataGrid.Columns>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=Market}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />                         
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers>
                                    </TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Market" Margin="10,5" />
                                <ToggleButton Name="Market" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_CheckboxFlt_Market" Closed="ClosePopUp" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <!--<RowDefinition />-->
                                            </Grid.RowDefinitions>
                                            <DockPanel Grid.Row="0" Margin="10">
                                                <!--<TextBlock Text="SEARCH" Margin="10"  DockPanel.Dock="Left" VerticalAlignment="Center" FontWeight="Bold"/>
                                                <TextBox x:Name="tbFilter_Market" Margin="0,10,10,10" Tag="Market" Width="Auto" TextChanged="textChangedEventHandler"/>-->
                                            </DockPanel>
                                            <StackPanel Orientation="Vertical" Grid.Row="1" Grid.RowSpan="2">
                                                <CheckBox Grid.Row="1" Name="Checkbox_selectAll_Market" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllCheckBox_Checked" 
                                                          Unchecked="SelectAllCheckBox_Checked" Content="(Select All)"/>
                                                <!--<CheckBox Grid.Row="1" Name="Checkbox_selectAllSearched_Market" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllSearchedCheckBox_Checked" 
                                                          Unchecked="SelectAllSearchedCheckBox_Checked" Content="(Select All Search Results)" Visibility="Collapsed"/>
                                                <CheckBox Grid.Row="2" Name="Checkbox_addSelection_Market" Margin="10,0,0,0" Tag="{Binding}" IsChecked="False" Checked="AddSelectionToFilter_Checked" 
                                                          Unchecked="AddSelectionToFilter_Checked" Content="(Add current selection to filter)"
                                                          Visibility="Collapsed"/>-->
                                                <ListBox Grid.Row="2" Margin="10" ItemsSource="{Binding}" Style="{Binding Source={StaticResource FilterListbox_Style}}" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}" />
                                                <Button Padding="5" Margin="10" Background="#1589B6" Foreground="White" Content="APPLY" Click="Market_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=Instrument}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers>
                                    </TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Instrument" Margin="10,5" />
                                <ToggleButton Name="Instrument" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_CheckboxFlt_Instrument" Closed="ClosePopUp" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <!--<RowDefinition />-->
                                            </Grid.RowDefinitions>
                                            <DockPanel Grid.Row="0" Margin="10">
                                                <!--<TextBlock Text="SEARCH" Margin="10"  DockPanel.Dock="Left" VerticalAlignment="Center" FontWeight="Bold"/>
                                                <TextBox x:Name="tbFilter_Instrument" Margin="0,10,10,10" Tag="Instrument" Width="Auto" TextChanged="textChangedEventHandler"/>-->
                                            </DockPanel>
                                            <StackPanel Orientation="Vertical" Grid.Row="1" Grid.RowSpan="2">
                                                <CheckBox Grid.Row="1" Name="Checkbox_selectAll_Instrument" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllCheckBox_Checked" 
                                                          Unchecked="SelectAllCheckBox_Checked" Content="(Select All)"/>
                                                <!--<CheckBox Grid.Row="1" Name="Checkbox_selectAllSearched_Instrument" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllSearchedCheckBox_Checked" 
                                                          Unchecked="SelectAllSearchedCheckBox_Checked" Content="(Select All Search Results)" Visibility="Collapsed"/>
                                                <CheckBox Grid.Row="2" Name="Checkbox_addSelection_Instrument" Margin="10,0,0,0" Tag="{Binding}" IsChecked="False" Checked="AddSelectionToFilter_Checked" 
                                                          Unchecked="AddSelectionToFilter_Checked" Content="(Add current selection to filter)"
                                                          Visibility="Collapsed"/>-->
                                                <ListBox Grid.Row="2" Margin="10" ItemsSource="{Binding}" Style="{Binding Source={StaticResource FilterListbox_Style}}" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Padding="5" Margin="10" Background="#1589B6" Foreground="White" Content="APPLY" Click="Instrument_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=Product}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers>
                                    </TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Product" Margin="10,5" />
                                <ToggleButton Name="Product" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_CheckboxFlt_Product" Closed="ClosePopUp" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <!--<RowDefinition />-->
                                            </Grid.RowDefinitions>
                                            <DockPanel Grid.Row="0" Margin="10">
                                                <!--<TextBlock Text="SEARCH" Margin="10"  DockPanel.Dock="Left" VerticalAlignment="Center" FontWeight="Bold"/>
                                                <TextBox x:Name="tbFilter_Product" Margin="0,10,10,10" Tag="Product" Width="Auto" TextChanged="textChangedEventHandler"/>-->
                                            </DockPanel>
                                            <StackPanel Orientation="Vertical" Grid.Row="1" Grid.RowSpan="2">
                                                <CheckBox Grid.Row="1" Name="Checkbox_selectAll_Product" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllCheckBox_Checked" 
                                                          Unchecked="SelectAllCheckBox_Checked" Content="(Select All)"/>
                                                <!--<CheckBox Grid.Row="1" Name="Checkbox_selectAllSearched_Product" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllSearchedCheckBox_Checked" 
                                                          Unchecked="SelectAllSearchedCheckBox_Checked" Content="(Select All Search Results)" Visibility="Collapsed"/>
                                                <CheckBox Grid.Row="2" Name="Checkbox_addSelection_Product" Margin="10,0,0,0" Tag="{Binding}" IsChecked="False" Checked="AddSelectionToFilter_Checked" 
                                                          Unchecked="AddSelectionToFilter_Checked" Content="(Add current selection to filter)"
                                                          Visibility="Collapsed"/>-->
                                                <ListBox Grid.Row="2" Margin="10" ItemsSource="{Binding}" Style="{Binding Source={StaticResource FilterListbox_Style}}" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Padding="5" Margin="10" Background="#1589B6" Foreground="White" Content="APPLY" Click="Product_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=Contract}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers>
                                    </TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Contract" Margin="10,5" />
                                <ToggleButton Name="Contract" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_CheckboxFlt_Contract" Closed="ClosePopUp" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <!--<RowDefinition />-->
                                            </Grid.RowDefinitions>
                                            <DockPanel Grid.Row="0" Margin="10">
                                                <!--<TextBlock Text="SEARCH" Margin="10"  DockPanel.Dock="Left" VerticalAlignment="Center" FontWeight="Bold"/>
                                                <TextBox x:Name="tbFilter_Contract" Margin="0,10,10,10" Tag="Contract" Width="Auto" TextChanged="textChangedEventHandler"/>-->
                                            </DockPanel>
                                            <StackPanel Orientation="Vertical" Grid.Row="1" Grid.RowSpan="2">
                                                <CheckBox Grid.Row="1" Name="Checkbox_selectAll_Contract" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllCheckBox_Checked" 
                                                          Unchecked="SelectAllCheckBox_Checked" Content="(Select All)"/>
                                                <!--<CheckBox Grid.Row="1" Name="Checkbox_selectAllSearched_Contract" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllSearchedCheckBox_Checked" 
                                                          Unchecked="SelectAllSearchedCheckBox_Checked" Content="(Select All Search Results)" Visibility="Collapsed"/>
                                                <CheckBox Grid.Row="2" Name="Checkbox_addSelection_Contract" Margin="10,0,0,0" Tag="{Binding}" IsChecked="False" Checked="AddSelectionToFilter_Checked" 
                                                          Unchecked="AddSelectionToFilter_Checked" Content="(Add current selection to filter)"
                                                          Visibility="Collapsed"/>-->
                                                <ListBox Grid.Row="2" Margin="10" ItemsSource="{Binding}" Style="{Binding Source={StaticResource FilterListbox_Style}}" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Padding="5" Margin="10" Background="#1589B6" Foreground="White" Content="APPLY" Click="Contract_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=ComboType}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers>
                                    </TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Combo Type" Margin="10,5" />
                                <ToggleButton Name="ComboType" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_CheckboxFlt_ComboType" Closed="ClosePopUp" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <!--<RowDefinition />-->
                                            </Grid.RowDefinitions>
                                            <DockPanel Grid.Row="0" Margin="10">
                                                <!--<TextBlock Text="SEARCH" Margin="10"  DockPanel.Dock="Left" VerticalAlignment="Center" FontWeight="Bold"/>
                                                <TextBox x:Name="tbFilter_ComboType" Margin="0,10,10,10" Tag="ComboType" Width="Auto" TextChanged="textChangedEventHandler"/>-->
                                            </DockPanel>
                                            <StackPanel Orientation="Vertical" Grid.Row="1" Grid.RowSpan="2">
                                                <CheckBox Grid.Row="1" Name="Checkbox_selectAll_ComboType" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllCheckBox_Checked" 
                                                          Unchecked="SelectAllCheckBox_Checked" Content="(Select All)"/>
                                                <!--<CheckBox Grid.Row="1" Name="Checkbox_selectAllSearched_ComboType" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllSearchedCheckBox_Checked" 
                                                          Unchecked="SelectAllSearchedCheckBox_Checked" Content="(Select All Search Results)" Visibility="Collapsed"/>
                                                <CheckBox Grid.Row="2" Name="Checkbox_addSelection_ComboType" Margin="10,0,0,0" Tag="{Binding}" IsChecked="False" Checked="AddSelectionToFilter_Checked" 
                                                          Unchecked="AddSelectionToFilter_Checked" Content="(Add current selection to filter)"
                                                          Visibility="Collapsed"/>-->
                                                <ListBox Grid.Row="2" Margin="10" ItemsSource="{Binding}" Style="{Binding Source={StaticResource FilterListbox_Style}}" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Padding="5" Margin="10" Background="#1589B6" Foreground="White" Content="APPLY" Click="ComboType_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn Width="auto" Binding="{Binding Path=DealID}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers>
                                    </TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Deal ID" Margin="10,5" />
                                <ToggleButton Name="DealID" Style="{Binding Source={StaticResource DropDown_btn}}" Click="BtnFilter_Click"/>
                                <Popup Name="pop_ComboFlt_DealID" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="VALUE" Margin="10"  VerticalAlignment="Center" FontWeight="Bold"/>
                                            <ComboBox Name="TextFltOptions_DealID" Grid.Row="1" Margin="10,0,10,0" SelectedIndex="0" ItemsSource="{StaticResource ComboBoxOptions}"/>
                                            <TextBlock Grid.Row="2" Text="TEXT" Margin="10" DockPanel.Dock="Left" VerticalAlignment="Center" FontWeight="Bold"/>
                                            <TextBox Name="DealID_Flt_Input"  Grid.Row="3" Margin="10,0,10,0"/>

                                            <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Padding="5" Margin="10" Background="#1589B6" Foreground="White" Content="APPLY" Click="DealID_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=Legs}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers>
                                    </TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Legs" Margin="10,5" />
                                <ToggleButton Name="Legs" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_CheckboxFlt_Legs" Closed="ClosePopUp" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <!--<RowDefinition />-->
                                            </Grid.RowDefinitions>
                                            <DockPanel Grid.Row="0" Margin="10">
                                                <!--<TextBlock Text="SEARCH" Margin="10"  DockPanel.Dock="Left" VerticalAlignment="Center" FontWeight="Bold"/>
                                                <TextBox x:Name="tbFilter_Legs" Margin="0,10,10,10" Tag="Legs" Width="Auto" TextChanged="textChangedEventHandler"/>-->
                                            </DockPanel>
                                            <StackPanel Orientation="Vertical" Grid.Row="1" Grid.RowSpan="2">
                                                <CheckBox Grid.Row="1" Name="Checkbox_selectAll_Legs" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllCheckBox_Checked" 
                                                          Unchecked="SelectAllCheckBox_Checked" Content="(Select All)"/>
                                                <!--<CheckBox Grid.Row="1" Name="Checkbox_selectAllSearched_Legs" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllSearchedCheckBox_Checked" 
                                                          Unchecked="SelectAllSearchedCheckBox_Checked" Content="(Select All Search Results)" Visibility="Collapsed"/>
                                                <CheckBox Grid.Row="2" Name="Checkbox_addSelection_Legs" Margin="10,0,0,0" Tag="{Binding}" IsChecked="False" Checked="AddSelectionToFilter_Checked" 
                                                          Unchecked="AddSelectionToFilter_Checked" Content="(Add current selection to filter)"
                                                          Visibility="Collapsed"/>-->
                                                <ListBox Grid.Row="2" Margin="10" ItemsSource="{Binding}" Style="{Binding Source={StaticResource FilterListbox_Style}}" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Padding="5" Margin="10" Background="#1589B6" Foreground="White" Content="APPLY" Click="Legs_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=Strike}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers></TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Strike Price" Margin="10,5" />
                                <ToggleButton Name="Strike"  Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup x:Name="pop_RangeFlt_Strike" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1*" />
                                                <RowDefinition Height="2*"  />
                                                <RowDefinition Height="1*" />
                                                <RowDefinition Height="2*" />
                                                <RowDefinition Height="1*" />
                                            </Grid.RowDefinitions>

                                            <TextBlock Text="Minimum" Margin="10" Foreground="Black"/>
                                            <Grid Grid.Row="1" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10,0,10,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="3*" />
                                                    <ColumnDefinition Width="1*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBox x:Name="MinNum_Strike" Text="" Grid.Row="0" Grid.RowSpan="2" HorizontalAlignment="Stretch"/>
                                                <RepeatButton  Grid.Column="1" Grid.Row="0" FontSize="8" Content="&#xf0de;" FontFamily="{StaticResource FontAwesome}" 
                                      VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Click="NUDButtonUP_Click" />
                                                <RepeatButton  Grid.Column="1" Grid.Row="1" FontSize="8" Content="&#xf0dd;" FontFamily="{StaticResource FontAwesome}" 
                                      VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Height="13" VerticalAlignment="Bottom" Click="NUDButtonDown_Click">
                                                    <RepeatButton.Style>
                                                        <Style TargetType="{x:Type RepeatButton}">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MinNum_Strike, UpdateSourceTrigger=PropertyChanged}" Value="0">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MinNum_Strike, UpdateSourceTrigger=PropertyChanged}" Value="">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </RepeatButton.Style>
                                                </RepeatButton>
                                            </Grid>

                                            <TextBlock Grid.Row="2" Text="Maximum" Margin="10" Foreground="Black" />
                                            <Grid Grid.Row="3" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10,0,10,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="3*" />
                                                    <ColumnDefinition Width="1*" />
                                                </Grid.ColumnDefinitions>

                                                <!--<TextBox x:Name="MaxNum_Strike" Text="" TextChanged="txtNum_TextChanged" Grid.RowSpan="2" HorizontalAlignment="Stretch" />-->
                                                <TextBox x:Name="MaxNum_Strike" Text="" Grid.RowSpan="2" HorizontalAlignment="Stretch" />
                                                <RepeatButton   Grid.Column="1" Grid.Row="0" FontSize="8" Content="&#xf0de;" FontFamily="{StaticResource FontAwesome}"  
                                                          VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Click="NUDButtonUP_Click"/>
                                                <RepeatButton Grid.Column="1" Grid.Row="1" FontSize="8"  Content="&#xf0dd;" FontFamily="{StaticResource FontAwesome}" 
                                                          VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Height="13" VerticalAlignment="Bottom" Click="NUDButtonDown_Click">
                                                    <RepeatButton.Style>
                                                        <Style TargetType="{x:Type RepeatButton}">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MaxNum_Strike, UpdateSourceTrigger=PropertyChanged}" Value="0">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MaxNum_Strike, UpdateSourceTrigger=PropertyChanged}" Value="">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </RepeatButton.Style>
                                                </RepeatButton>
                                            </Grid>
                                            <StackPanel  Orientation="Horizontal" HorizontalAlignment="Center" Grid.Row="4">
                                                <Button Content="CANCEL" Click="ClosePopUp_Click"  Margin="10" Padding="5" Style="{StaticResource cancelBtn}"/>
                                                <Button Tag="{Binding}" Margin="10" Padding="5" Background="#1589B6" Foreground="White" 
                                                        Click="Strike_Filter_Apply" CommandParameter="" Content="APPLY" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>

                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=Price}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers></TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Price/Premium" Margin="10,5" />
                                <ToggleButton Name="Price"  Click="BtnFilter_Click" 
                                          Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup x:Name="pop_RangeFlt_Price" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1*" />
                                                <RowDefinition Height="2*"  />
                                                <RowDefinition Height="1*" />
                                                <RowDefinition Height="2*" />
                                                <RowDefinition Height="1*" />
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="Minimum" Margin="10" Foreground="Black"/>
                                            <Grid Grid.Row="1" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10,0,10,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="3*" />
                                                    <ColumnDefinition Width="1*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBox x:Name="MinNum_Price" Text="" Grid.Row="0" Grid.RowSpan="2" HorizontalAlignment="Stretch"/>
                                                <RepeatButton  Grid.Column="1" Grid.Row="0" FontSize="8" Content="&#xf0de;" FontFamily="{StaticResource FontAwesome}" 
                                      VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Click="NUDButtonUP_Click" />
                                                <RepeatButton  Grid.Column="1" Grid.Row="1" FontSize="8" Content="&#xf0dd;" FontFamily="{StaticResource FontAwesome}" 
                                      VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Height="13" VerticalAlignment="Bottom" Click="NUDButtonDown_Click">
                                                    <RepeatButton.Style>
                                                        <Style TargetType="{x:Type RepeatButton}">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MinNum_Price, UpdateSourceTrigger=PropertyChanged}" Value="0">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MinNum_Price, UpdateSourceTrigger=PropertyChanged}" Value="">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </RepeatButton.Style>
                                                </RepeatButton>
                                            </Grid>
                                            <TextBlock Grid.Row="2" Text="Maximum" Margin="10" Foreground="Black" />
                                            <Grid Grid.Row="3" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10,0,10,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="3*" />
                                                    <ColumnDefinition Width="1*" />
                                                </Grid.ColumnDefinitions>

                                                <!--<TextBox x:Name="MaxNum_Price" Text="" TextChanged="txtNum_TextChanged" Grid.RowSpan="2" HorizontalAlignment="Stretch" />-->
                                                <TextBox x:Name="MaxNum_Price" Text="" Grid.RowSpan="2" HorizontalAlignment="Stretch" />
                                                <RepeatButton   Grid.Column="1" Grid.Row="0" FontSize="8" Content="&#xf0de;" FontFamily="{StaticResource FontAwesome}"  
                                                          VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Click="NUDButtonUP_Click"/>
                                                <RepeatButton Grid.Column="1" Grid.Row="1" FontSize="8"  Content="&#xf0dd;" FontFamily="{StaticResource FontAwesome}" 
                                                          VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Height="13" VerticalAlignment="Bottom" Click="NUDButtonDown_Click">
                                                    <RepeatButton.Style>
                                                        <Style TargetType="{x:Type RepeatButton}">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MaxNum_Price, UpdateSourceTrigger=PropertyChanged}" Value="0">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MaxNum_Price, UpdateSourceTrigger=PropertyChanged}" Value="">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </RepeatButton.Style>
                                                </RepeatButton>
                                            </Grid>
                                            <StackPanel  Orientation="Horizontal" HorizontalAlignment="Center" Grid.Row="4">
                                                <Button Content="CANCEL" Click="ClosePopUp_Click"  Margin="10" Padding="5" Style="{StaticResource cancelBtn}"/>
                                                <Button Tag="{Binding}" Margin="10" Padding="5" Background="#1589B6" Foreground="White"
                                                        Click="Price_Filter_Apply"  CommandParameter="" Content="APPLY" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=QtyInLots}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers></TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Quantity (Lots)" Margin="10,5" />
                                <ToggleButton Name="QtyInLots"  Click="BtnFilter_Click" 
                                          Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup x:Name="pop_RangeFlt_QtyInLots" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1*" />
                                                <RowDefinition Height="2*"  />
                                                <RowDefinition Height="1*" />
                                                <RowDefinition Height="2*" />
                                                <RowDefinition Height="1*" />
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="Minimum" Margin="10" Foreground="Black"/>
                                            <Grid Grid.Row="1" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10,0,10,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="3*" />
                                                    <ColumnDefinition Width="1*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBox x:Name="MinNum_QtyInLots" Text="" Grid.Row="0" Grid.RowSpan="2" HorizontalAlignment="Stretch"/>
                                                <RepeatButton  Grid.Column="1" Grid.Row="0" FontSize="8" Content="&#xf0de;" FontFamily="{StaticResource FontAwesome}" 
                                      VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Click="NUDButtonUP_Click" />
                                                <RepeatButton  Grid.Column="1" Grid.Row="1" FontSize="8" Content="&#xf0dd;" FontFamily="{StaticResource FontAwesome}" 
                                      VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Height="13" VerticalAlignment="Bottom" Click="NUDButtonDown_Click">
                                                    <RepeatButton.Style>
                                                        <Style TargetType="{x:Type RepeatButton}">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MinNum_QtyInLots, UpdateSourceTrigger=PropertyChanged}" Value="0">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MinNum_QtyInLots, UpdateSourceTrigger=PropertyChanged}" Value="">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </RepeatButton.Style>
                                                </RepeatButton>
                                            </Grid>
                                            <TextBlock Grid.Row="2" Text="Maximum" Margin="10" Foreground="Black" />
                                            <Grid Grid.Row="3" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10,0,10,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="3*" />
                                                    <ColumnDefinition Width="1*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBox x:Name="MaxNum_QtyInLots" Text="" Grid.RowSpan="2" HorizontalAlignment="Stretch" />
                                                <RepeatButton   Grid.Column="1" Grid.Row="0" FontSize="8" Content="&#xf0de;" FontFamily="{StaticResource FontAwesome}"  
                                                          VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Click="NUDButtonUP_Click"/>
                                                <RepeatButton Grid.Column="1" Grid.Row="1" FontSize="8"  Content="&#xf0dd;" FontFamily="{StaticResource FontAwesome}" 
                                                          VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Height="13" VerticalAlignment="Bottom" Click="NUDButtonDown_Click">
                                                    <RepeatButton.Style>
                                                        <Style TargetType="{x:Type RepeatButton}">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MaxNum_QtyInLots, UpdateSourceTrigger=PropertyChanged}" Value="0">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MaxNum_QtyInLots, UpdateSourceTrigger=PropertyChanged}" Value="">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </RepeatButton.Style>
                                                </RepeatButton>
                                            </Grid>
                                            <StackPanel  Orientation="Horizontal" HorizontalAlignment="Center" Grid.Row="4">
                                                <Button Content="CANCEL" Click="ClosePopUp_Click"  Margin="10" Padding="5" Style="{StaticResource cancelBtn}"/>
                                                <Button Tag="{Binding}" Margin="10" Padding="5" Background="#1589B6" Foreground="White" Click="QtyInLots_Filter_Apply" 
                                                        CommandParameter="" Content="APPLY" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=Amount}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers></TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Amount" Margin="10,5" />
                                <ToggleButton Name="Amount"  Click="BtnFilter_Click" 
                                          Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup x:Name="pop_RangeFlt_Amount" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="1*" />
                                                <RowDefinition Height="2*"  />
                                                <RowDefinition Height="1*" />
                                                <RowDefinition Height="2*" />
                                                <RowDefinition Height="1*" />
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="Minimum" Margin="10" Foreground="Black"/>
                                            <Grid Grid.Row="1" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10,0,10,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="3*" />
                                                    <ColumnDefinition Width="1*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBox x:Name="MinNum_Amount" Text="" Grid.Row="0" Grid.RowSpan="2" HorizontalAlignment="Stretch"/>
                                                <RepeatButton  Grid.Column="1" Grid.Row="0" FontSize="8" Content="&#xf0de;" FontFamily="{StaticResource FontAwesome}" 
                                      VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Click="NUDButtonUP_Click" />
                                                <RepeatButton  Grid.Column="1" Grid.Row="1" FontSize="8" Content="&#xf0dd;" FontFamily="{StaticResource FontAwesome}" 
                                      VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Height="13" VerticalAlignment="Bottom" Click="NUDButtonDown_Click">
                                                    <RepeatButton.Style>
                                                        <Style TargetType="{x:Type RepeatButton}">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MinNum_Amount, UpdateSourceTrigger=PropertyChanged}" Value="0">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MinNum_Amount, UpdateSourceTrigger=PropertyChanged}" Value="">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </RepeatButton.Style>
                                                </RepeatButton>
                                            </Grid>
                                            <TextBlock Grid.Row="2" Text="Maximum" Margin="10" Foreground="Black" />
                                            <Grid Grid.Row="3" VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10,0,10,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="3*" />
                                                    <ColumnDefinition Width="1*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBox Name="MaxNum_Amount" Text="" Grid.RowSpan="2" HorizontalAlignment="Stretch" />
                                                <RepeatButton   Grid.Column="1" Grid.Row="0" FontSize="8" Content="&#xf0de;" FontFamily="{StaticResource FontAwesome}"  
                                                          VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Click="NUDButtonUP_Click"/>
                                                <RepeatButton Grid.Column="1" Grid.Row="1" FontSize="8"  Content="&#xf0dd;" FontFamily="{StaticResource FontAwesome}" 
                                                          VerticalContentAlignment="Center" HorizontalContentAlignment="Center" Height="13" VerticalAlignment="Bottom" Click="NUDButtonDown_Click">
                                                    <RepeatButton.Style>
                                                        <Style TargetType="{x:Type RepeatButton}">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MaxNum_Amount, UpdateSourceTrigger=PropertyChanged}" Value="0">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding Text, ElementName=MaxNum_Amount, UpdateSourceTrigger=PropertyChanged}" Value="">
                                                                    <Setter Property="IsEnabled" Value="False"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </RepeatButton.Style>
                                                </RepeatButton>
                                            </Grid>
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Grid.Row="4">
                                                <Button Content="CANCEL" Click="ClosePopUp_Click"  Margin="10" Padding="5" Style="{StaticResource cancelBtn}"/>
                                                <Button Tag="{Binding}" Margin="10" Padding="5" Background="#1589B6" Foreground="White" 
                                                        Click="Amount_Filter_Apply" CommandParameter="" Content="APPLY" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=Unit}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers>
                                    </TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Unit" Margin="10,5" />
                                <ToggleButton Name="Unit" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_CheckboxFlt_Unit" Closed="ClosePopUp" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <!--<RowDefinition />-->
                                            </Grid.RowDefinitions>
                                            <DockPanel Grid.Row="0" Margin="10">
                                                <!--<TextBlock Text="SEARCH" Margin="10"  DockPanel.Dock="Left" VerticalAlignment="Center" FontWeight="Bold"/>
                                                <TextBox x:Name="tbFilter_Unit" Margin="0,10,10,10" Tag="Unit" Width="Auto" TextChanged="textChangedEventHandler"/>-->
                                            </DockPanel>
                                            <StackPanel Orientation="Vertical" Grid.Row="1" Grid.RowSpan="2">
                                                <CheckBox Grid.Row="1" Name="Checkbox_selectAll_Unit" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllCheckBox_Checked" 
                                                          Unchecked="SelectAllCheckBox_Checked" Content="(Select All)"/>
                                                <!--<CheckBox Grid.Row="1" Name="Checkbox_selectAllSearched_Unit" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllSearchedCheckBox_Checked" 
                                                          Unchecked="SelectAllSearchedCheckBox_Checked" Content="(Select All Search Results)" Visibility="Collapsed"/>
                                                <CheckBox Grid.Row="2" Name="Checkbox_addSelection_Unit" Margin="10,0,0,0" Tag="{Binding}" IsChecked="False" Checked="AddSelectionToFilter_Checked" 
                                                          Unchecked="AddSelectionToFilter_Checked" Content="(Add current selection to filter)"
                                                          Visibility="Collapsed"/>-->
                                                <ListBox Grid.Row="2" Margin="10" ItemsSource="{Binding}" Style="{Binding Source={StaticResource FilterListbox_Style}}" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}" />
                                                <Button Padding="5" Margin="10" Background="#1589B6" Foreground="White" Content="APPLY" Click="Unit_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=ExecutedSGT,StringFormat=dd/MM/yyyy hh:mm tt}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers></TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Executed (SGT)" Margin="10,5" />
                                <ToggleButton Name="ExecutedSGT" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_ComboDateTimeFlt_ExecutedSGT" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                            </Grid.RowDefinitions>
                                            <TextBlock  Grid.Row="0" Margin="10" Text="FROM"  VerticalAlignment="Center" FontWeight="Bold"/>
                                            <DatePicker Grid.Row="1" Margin="10,0,10,0" Name="datePicker_ExecutedSGTFrom" SelectedDateFormat="Long" CalendarStyle="{StaticResource styleCalendar}"/>
                                            <ComboBox Grid.Row="2" Name="ExecTime_From"  Margin="10,5,10,0" SelectedIndex="0" ItemsSource="{StaticResource TimePointOptions}"/>

                                            <TextBlock  Grid.Row="3" Margin="10" Text="TO" VerticalAlignment="Center" FontWeight="Bold"/>
                                            <DatePicker Grid.Row="4" Margin="10,0,10,0" Name="datePicker_ExecutedSGTTo" SelectedDateFormat="Long" CalendarStyle="{StaticResource styleCalendar}"/>
                                            <ComboBox  Grid.Row="5" Name="ExecTime_To"  Margin="10,5,10,0" SelectedIndex="0" ItemsSource="{StaticResource TimePointOptions}"/>

                                            <StackPanel Grid.Row="6"  Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Margin="10" Padding="5" Background="#1589B6" Foreground="White" Content="APPLY" Click="ExecutedSGT_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=SubmittedSGT,StringFormat=dd/MM/yyyy HH:mm}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers></TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Submitted (SGT)" Margin="10,5" />
                                <ToggleButton Name="SubmittedSGT" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_ComboDateTimeFlt_SubmittedSGT" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                            </Grid.RowDefinitions>
                                            <TextBlock  Grid.Row="0" Margin="10" Text="FROM"  VerticalAlignment="Center" FontWeight="Bold"/>
                                            <DatePicker Grid.Row="1" Margin="10,0,10,0" Name="datePicker_SubmittedSGTFrom" SelectedDateFormat="Long" CalendarStyle="{StaticResource styleCalendar}"/>
                                            <ComboBox Grid.Row="2" Name="SubmitTime_From"  Margin="10,5,10,0" SelectedIndex="0" ItemsSource="{StaticResource TimePointOptions}"/>

                                            <TextBlock  Grid.Row="3" Margin="10" Text="TO" VerticalAlignment="Center" FontWeight="Bold"/>
                                            <DatePicker Grid.Row="4" Margin="10,0,10,0" Name="datePicker_SubmittedSGTTo" SelectedDateFormat="Long" CalendarStyle="{StaticResource styleCalendar}"/>
                                            <ComboBox  Grid.Row="5" Name="SubmitTime_To"  Margin="10,5,10,0" SelectedIndex="0" ItemsSource="{StaticResource TimePointOptions}"/>

                                            <StackPanel Grid.Row="6"  Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Margin="10" Padding="5" Background="#1589B6" Foreground="White" Content="APPLY" Click="SubmittedSGT_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=ClearedSGT, StringFormat=dd/MM/yyyy HH:mm}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers></TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Cleared (SGT)" Margin="10,5" />
                                <ToggleButton Name="ClearedSGT" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_ComboDateTimeFlt_ClearedSGT" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                            </Grid.RowDefinitions>
                                            <TextBlock  Grid.Row="0" Margin="10" Text="FROM"  VerticalAlignment="Center" FontWeight="Bold"/>
                                            <DatePicker Grid.Row="1" Margin="10,0,10,0" Name="datePicker_ClearedSGTFrom" SelectedDateFormat="Long" CalendarStyle="{StaticResource styleCalendar}"/>
                                            <ComboBox Grid.Row="2" Name="ClearedTime_From"  Margin="10,5,10,0" SelectedIndex="0" ItemsSource="{StaticResource TimePointOptions}"/>

                                            <TextBlock  Grid.Row="3" Margin="10" Text="TO" VerticalAlignment="Center" FontWeight="Bold"/>
                                            <DatePicker Grid.Row="4" Margin="10,0,10,0" Name="datePicker_ClearedSGTTo" SelectedDateFormat="Long" CalendarStyle="{StaticResource styleCalendar}"/>
                                            <ComboBox  Grid.Row="5" Name="ClearedTime_To"  Margin="10,5,10,0" SelectedIndex="0" ItemsSource="{StaticResource TimePointOptions}"/>

                                            <StackPanel Grid.Row="6"  Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Margin="10" Padding="5" Background="#1589B6" Foreground="White" Content="APPLY" Click="ClearedSGT_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=Session}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers>
                                    </TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Session" Margin="10,5" />
                                <ToggleButton Name="Session" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_CheckboxFlt_Session" Closed="ClosePopUp" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <!--<RowDefinition />-->
                                            </Grid.RowDefinitions>
                                            <DockPanel Grid.Row="0" Margin="10">
                                                <!--<TextBlock Text="SEARCH" Margin="10"  DockPanel.Dock="Left" VerticalAlignment="Center" FontWeight="Bold"/>
                                                <TextBox x:Name="tbFilter_Session" Margin="0,10,10,10" Tag="Session" Width="Auto" TextChanged="textChangedEventHandler"/>-->
                                            </DockPanel>
                                            <StackPanel Orientation="Vertical" Grid.Row="1" Grid.RowSpan="2">
                                                <CheckBox Grid.Row="1" Name="Checkbox_selectAll_Session" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllCheckBox_Checked" 
                                                          Unchecked="SelectAllCheckBox_Checked" Content="(Select All)"/>
                                                <!--<CheckBox Grid.Row="1" Name="Checkbox_selectAllSearched_Session" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllSearchedCheckBox_Checked" 
                                                          Unchecked="SelectAllSearchedCheckBox_Checked" Content="(Select All Search Results)" Visibility="Collapsed"/>
                                                <CheckBox Grid.Row="2" Name="Checkbox_addSelection_Session" Margin="10,0,0,0" Tag="{Binding}" IsChecked="False" Checked="AddSelectionToFilter_Checked" 
                                                          Unchecked="AddSelectionToFilter_Checked" Content="(Add current selection to filter)" Visibility="Collapsed"/>-->
                                                <ListBox Grid.Row="2" Margin="10" ItemsSource="{Binding}" Style="{Binding Source={StaticResource FilterListbox_Style}}" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Padding="5" Margin="10" Background="#1589B6" Foreground="White" Content="APPLY" Click="Session_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=ClearedDate,StringFormat=dd/MM/yyyy}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers></TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Cleared Date" Margin="10,5" />
                                <ToggleButton Name="ClearedDate" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_DateTimeFlt_ClearedDate" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                            </Grid.RowDefinitions>
                                            <TextBlock  Grid.Row="0" Margin="10" Text="FROM"  VerticalAlignment="Center" FontWeight="Bold"/>
                                            <DatePicker Grid.Row="1" Margin="10,0,10,0" Name="datePicker_ClearedDateFrom" SelectedDateFormat="Long" CalendarStyle="{StaticResource styleCalendar}"/>

                                            <TextBlock  Grid.Row="2" Margin="10" Text="TO" VerticalAlignment="Center" FontWeight="Bold"/>
                                            <DatePicker Grid.Row="3" Margin="10,0,10,5" Name="datePicker_ClearedDateTo" SelectedDateFormat="Long" CalendarStyle="{StaticResource styleCalendar}"/>

                                            <StackPanel Grid.Row="4"  Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Margin="10" Padding="5" Background="#1589B6" Foreground="White" Content="APPLY" Click="ClearedDate_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=DeletedSGT}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers></TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Deleted (SGT)" Margin="10,5" />
                                <ToggleButton Name="DeletedSGT" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_ComboDateTimeFlt_DeletedSGT" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                                <RowDefinition Height="auto" />
                                            </Grid.RowDefinitions>
                                            <TextBlock  Grid.Row="0" Margin="10" Text="FROM"  VerticalAlignment="Center" FontWeight="Bold"/>
                                            <DatePicker Grid.Row="1" Margin="10,0,10,0" Name="datePicker_DeletedSGTFrom" SelectedDateFormat="Long" CalendarStyle="{StaticResource styleCalendar}"/>
                                            <ComboBox Grid.Row="2" Name="DeletedTime_From"  Margin="10,5,10,0" SelectedIndex="0" ItemsSource="{StaticResource TimePointOptions}"/>

                                            <TextBlock  Grid.Row="3" Margin="10" Text="TO" VerticalAlignment="Center" FontWeight="Bold"/>
                                            <DatePicker Grid.Row="4" Margin="10,0,10,0" Name="datePicker_DeletedSGTTo" SelectedDateFormat="Long" CalendarStyle="{StaticResource styleCalendar}"/>
                                            <ComboBox  Grid.Row="5" Name="DeletedTime_To"  Margin="10,5,10,0" SelectedIndex="0" ItemsSource="{StaticResource TimePointOptions}"/>

                                            <StackPanel Grid.Row="6"  Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Margin="10" Padding="5" Background="#1589B6" Foreground="White" Content="APPLY" Click="DeletedSGT_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="auto" Binding="{Binding Path=Status}">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="{x:Type DataGridColumnHeader}">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.Header>
                            <DockPanel>
                                <TextBlock Style="{StaticResource SortDirectionStyle}">
                                    <TextBlock.Triggers>
                                    </TextBlock.Triggers>
                                </TextBlock>
                                <TextBlock Text="Status" Margin="10,5" />
                                <ToggleButton Name="Status" Click="BtnFilter_Click" Style="{Binding Source={StaticResource DropDown_btn}}"/>
                                <Popup Name="pop_CheckboxFlt_Status" Closed="ClosePopUp" Style="{Binding Source={StaticResource PopUpStyle}}">
                                    <Border Background="White" BorderBrush="Gray" BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <!--<RowDefinition />-->
                                            </Grid.RowDefinitions>
                                            <DockPanel Grid.Row="0" Margin="10">
                                                <!--<TextBlock Text="SEARCH" Margin="10"  DockPanel.Dock="Left" VerticalAlignment="Center" FontWeight="Bold"/>
                                                <TextBox x:Name="tbFilter_Status" Margin="0,10,10,10" Tag="Status" Width="Auto" TextChanged="textChangedEventHandler"/>-->
                                            </DockPanel>
                                            <StackPanel Orientation="Vertical" Grid.Row="1" Grid.RowSpan="2">
                                                <CheckBox Grid.Row="1" Name="Checkbox_selectAll_Status" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllCheckBox_Checked" 
                                                          Unchecked="SelectAllCheckBox_Checked" Content="(Select All)"/>
                                                <!--<CheckBox Grid.Row="1" Name="Checkbox_selectAllSearched_Status" Margin="10,0,0,0" Tag="{Binding}" IsChecked="True" Checked="SelectAllSearchedCheckBox_Checked" 
                                                          Unchecked="SelectAllSearchedCheckBox_Checked" Content="(Select All Search Results)" Visibility="Collapsed"/>
                                                <CheckBox Grid.Row="2" Name="Checkbox_addSelection_Status" Margin="10,0,0,0" Tag="{Binding}" IsChecked="False" Checked="AddSelectionToFilter_Checked" 
                                                          Unchecked="AddSelectionToFilter_Checked" Content="(Add current selection to filter)"
                                                          Visibility="Collapsed"/>-->
                                                <ListBox Grid.Row="2" Margin="10" ItemsSource="{Binding}" Style="{Binding Source={StaticResource FilterListbox_Style}}" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Margin="10" Padding="5" Content="CANCEL" Click="ClosePopUp_Click" Style="{StaticResource cancelBtn}"/>
                                                <Button Padding="5" Margin="10" Background="#1589B6" Foreground="White" Content="APPLY" Click="Status_Filter_Apply" Style="{StaticResource popUpBtn}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </Popup>
                            </DockPanel>
                        </DataGridTextColumn.Header>
                    </DataGridTextColumn>

                </DataGrid.Columns>
            </DataGrid>
        </DockPanel>
    </Grid>
</UserControl>
